<!doctype html>
<html lang="en" ng-app="arbapp" ng-controller="appCtrl">
  <head>
    <meta charset="utf-8">
    <title>beer o'clock</title>
    <link rel="stylesheet" href="css/app.css"/>
  </head>
  <body class="transition">

    <div class="body-shadow"> </div>

    <div class="side-bar" ng-show="status.loaded">
      <ul>
        <li ng-init="showAdminPanel = false" ng-class="{active:showAdminPanel}" >
          <div class="glyph" ng-click="showAdminPanel = !showAdminPanel">G</div>
          <div class="side-board" ng-show="status.loaded && showAdminPanel">
            <div class="heading bare">Beer Administration Panel</div>
            <div class="content">
              <input type="text" ng-model="newatt.name" placeholder="Name > 1 character"> <div class="button" ng-click="add(newatt)" ng-show="newatt.name.length > 1">Add Alcoholic</div>
              <hr/>
              <input type="text" ng-model="delguy.name" placeholder="Type Name to Remove"> <div class="button" ng-click="del(delguy)" ng-show="delguy">Remove</div>
              <div ng-show="delMessage">
                <div class="heading bare">Undo!</div>
                {{delMessage}} <div class="button" ng-click="delMessage = false; undo(delguy);">Undo</div>
                <div class="button" ng-click="delMessage = false;">He Deserved It</div>
              </div>
            </div>
          </div>
        </li>
        <li ng-init="showChat = true" ng-class="{active:showChat}">
          <div class="glyph" ng-click="showChat = !showChat">b</div>
        </li>
      </ul>
    </div>

    <div class="main" ng-show="status.loaded">

      <div class="site-header">
        <div class="forque">BeerTime!
          <div class="feature glyph">*<div class=" forque yay2">yay!</div></div>
        </div>
        <div><strong>Bringing the end of the week closer, one second at a time</strong></div>
      </div>

      <ul class="columns one">
        <li>
          <div class="digital-container">
            <span class="digital glyph">T</span>
            <span class="digital">{{beerClock | hms:'d'}}</span> d
            <span class="digital">{{beerClock | hms:'h'}}</span> h
            <span class="digital">{{beerClock | hms:'m'}}</span> m
            <span class="digital">{{beerClock | hms:'s'}}</span> s
            <div ng-show="beerClock < 0">Beer o'clock is here! Please lift your bottom from your seat and proceed with all haste to the pub.</div>
            <div class="content-pane" ng-show="beerClock < -60">
              <div class="heading error">WARNING!!!</div>
              <div class="content">If you are reading this, your beer appointment is overdue. Proceed to the pub immediately.</div>
            </div>
          </div>
        </li>

        <li>
          <div>
            <div class="list" ng-repeat="att in attendees | filter:{deleted:'false'} | orderBy:'name'">
              <div class="attr glyph comment-ind" ng-click="att.showCommentField = !att.showCommentField;" ng-class="{is:att.comment, isnot: !att.comment}">b</div>
              <div class="attr name">
                {{att.name}}
                <div class="comment small">{{att.comment || 'No comment'}}</div>
              </div>
              <div class="attr glyph" ng-click="att.pub = !att.pub; update(att);" ng-class="{no: !att.pub, yes: att.pub}">{{att.pub | onoff}}</div>
              <div class="attr glyph" ng-click="att.shots = !att.shots; update(att);" ng-class="{no: !att.shots, yes: att.shots}">{{att.shots | onoff}}</div>
              <span class="attr beer" ng-click="att.shout = att.shout + 1; update(att);" numdrink="{{att.shout}}"></span>
              <div class="attr comment" ng-show="att.showCommentField">
                <input class="" type="text" ng-model="att.comment">
                <div class="button" ng-click="att.showCommentField = false; update(att);">Save</div>
              </div>
            </div>
          </div>
        </li>

        <li ng-show="showChat">
          <input type="text" ng-model="chat.name" placeholder="Your Name, Sir / Madam">
          <input type="text" ng-model="chat.message" placeholder="BeerChat" onEnter="sendMessage(chat)"> <div class="button" ng-click="sendMessage(chat)" ng-show="chat">Send</div>
          <hr/>
          <div class="message" ng-repeat="msg in messages | limitTo:-5 | orderBy:'date':true">
            <span class="attr name forque">{{msg.name}}</span>
            <span class="attr date">{{msg.date | date:'medium'}}</span>
            <div class="attr message-content">{{msg.message}}</div>
          </div>
        </li>
    </div>

    <!-- Show loader until status.loaded is init'd to true, at which point ng
      will do it's thing and make the loader go away -->
    <div class="index-loader content-pane" ng-show="!status.loaded" ng-init="status.loaded=true;" ng-animate="{show:'show',hide:'hide'}">
      <div class="heading">Loading</div>
      <div class="content">
        <img class="loader" src="img/bar-loader.gif" alt="Loading...">
        Bit slow, isn't it?
      </div>
    </div>

    <!-- In production use:
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    -->
    <script src="lib/vendor/angular/angular.js"></script>
    <script src="lib/vendor/angular/angular-resource.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/services.js"></script>
    <script src="js/directives.js"></script>

    <!-- No script -->
    <noscript>
      <style type="text/css">.index-loader { display: none; }</style>
      <div class="content-pane">
        <div class="heading">Uh Oh!</div>
        <div class="content">
          This site requires javascript to function correctly, if at all. Javascript is pretty good these days. Turn it on! ;-)
        </div>
      </div>
    </noscript>
  </body>
</html>
